{"version":3,"file":"atomico-todo.iife.js","sources":["../node_modules/@atomico/core/dist/atomico.mjs","../node_modules/@atomico/element/dist/atomico-element.mjs","../node_modules/style-inject/dist/style-inject.es.js","../src/components/Input/index.js","../src/components/Item/index.js","../src/index.js"],"sourcesContent":["function e(e,t,n){var r=arguments;if(t=t||{},arguments.length>3){n=[n];for(var o=3;o<arguments.length;o++)n.push(r[o])}null!=n&&(t.children=n);var a={type:e,props:t},u=t.key;return null!=u&&(a.key=\"\"+u),a}function t(t){return null!=t&&\"boolean\"!=typeof t||(t=\"\"),\"string\"==typeof t||\"number\"==typeof t?e(null,null,\"\"+t):t}var n=[],r={},o={},a=\"@ctx.\",u=\"@state\",c=\"@type\",i=\"host\",s=97,f=116,l=79,p=77,v=73,d=67,h={children:1},y={innerHTML:1,textContent:1,contenteditable:1},g={};function m(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function w(e,t){var n=arguments;for(var r in t)e[r]=t[r];for(var o=2;o<arguments.length;o++)w(e,n[o]);return e}var k,x,b=Promise.prototype.then.bind(Promise.resolve());function C(e,t,n,o,a,u){if(o!=n)if(\"o\"!=t[0]||\"n\"!=t[1]||\"function\"!=typeof o&&\"function\"!=typeof n)switch(t){case\"ref\":o&&(o.current=e);break;case\"style\":!function(e,t,n){var r=t,o=n;if(\"object\"==typeof o)for(var a in o=\"\",n)n[a]&&(g[a]||(g[a]=a.replace(/([A-Z])/g,\"-$1\").toLowerCase()),o+=g[a]+\":\"+n[a]+\";\");r!=o&&(e.style.cssText=o)}(e,n||e.style.cssText,o);break;case\"shadowDom\":return void(\"attachShadow\"in e&&(e.shadowRoot&&!o||!e.shadowRoot&&o)&&e.attachShadow({mode:o?\"open\":\"closed\"}));case\"key\":t=\"data-key\",null==o?delete e.dataset.key:e.dataset.key=o;break;case\"class\":case\"className\":t=a?\"class\":\"className\";default:\"list\"!=t&&!a&&t in e?e[t]=null==o?\"\":o:null==o?e.removeAttribute(t):e.setAttribute(t,o)}else!function(e,t,n,o){r[t]||(r[t]=t.slice(2).toLocaleLowerCase()),t=r[t],o.handleEvent||(o.handleEvent=N),n?(o[t]||e.addEventListener(t,o),o[t]=n):o[t]&&(e.removeEventListener(t,o),delete o[t])}(e,t,o,u)}function N(e){return this[e.type](e)}function E(){if(!k)throw new Error(\"the hooks can only be called from an existing functional component in the diff queue\");return k}function L(e,t){var n,r,o=E().component,a=x++;return o.hooks[a]||(r=!0,o.hooks[a]={state:t}),(n=o.hooks[a]).reducer=e,r&&A(n,{type:s}),[n.state,function(e){return A(n,e)}]}function A(e,t){e.reducer&&(e.state=e.reducer(e.state,t))}function S(e,t){for(var n=e.length,r=0;r<n;r++){var o=e[r],a=o.hooks,u=a.length;t.type===d&&(o.remove=!0);for(var c=0;c<u;c++)A(a[c],t)}}function T(e,t,n,r){var o=(t[e]||{}).updateComponent,a=t.childNodes,u=a.length;o&&o!=r&&o(n?v:d);for(var c=0;c<u;c++)T(e,a[c])}function V(e,t){var n,r=document;return(n=null!=e?t?r.createElementNS(\"http://www.w3.org/2000/svg\",e):r.createElement(e):r.createTextNode(\"\"))[c]=e,n}function j(e,r,o,a,u){if(void 0===u&&(u=0),o=o||[],a=a||[],Array.isArray(e))for(var c=e.length,i=0;i<c;i++)j(e[i],r,o,a,u+1);else{if(null==e&&!u)return n;var s=r?r(e,a.length):t(e);r||\"object\"==typeof s&&null!=s.key&&-1==o.indexOf(s.key)&&(o.push(s.key),o.withKeyes=!0),a.push(s)}return a}function O(n,r,a){a=a||u,n=t(n),a==u&&n.type!=i&&(n=e(i,{},n)),function e(n,r,o,a,u,s){var g=r&&r[n]||{},m=g.vnode,N=g.updateComponent,E=g.handlers;if(void 0===E&&(E={}),m==o)return r;m=m||{props:{}};var L=o.type,A=o.props,O=A.shadowDom,P=A.children,R=\"function\"==typeof L;if(u=u||\"svg\"==L,R&&!N&&(N=function(n,r){var o,a=[];return function u(c,i,s,h){switch(c){case f:return o=i,function c(i,s,v){if(o){if(\"function\"!=typeof(i=t(i)).type)return S(a.splice(v),{type:d}),o=e(n,o,i,s,r,u),void(a.length&&(o[n].updateComponent=u));var h,y,g=a[v]||{};g.type!=i.type&&(S(a.splice(v),{type:d}),a[v]=w({hooks:[]},i),h=!0,y=!0);var m=i.props,C=(g=a[v]).props;if(!y){var N=Object.keys(C).length,E=0;for(var L in m)if(E++,m[L]!=C[L]){y=!0;break}y=y||N!=E}y=g.context!=s||y,g.props=m,g.context=s,y&&!g.prevent&&function e(){if(g.remove)return o;var t=k={component:g,context:s,next:function(){g.prevent||(g.prevent=!0,b(function(){g.prevent=!1,e()}))}};x=0,S([g],{type:f});var n=g.type(g.props);k=!1,x=0,c(n,t.context,v+1),S([g],{type:h?l:p}),h=!1}()}}(s,h,0),o;case v:S([].concat(a).reverse(),{type:c});break;case d:o=!1,S(a.reverse(),{type:c}),a=[]}}}(n,u)),!R&&L!=i&&function(e){if(e){if(!e[c]){var t=e.nodeName.toLowerCase();e[c]=\"#text\"==t?null:t}return e[c]}}(r)!==L){var B=V(L,u),D=r&&r.parentNode;D&&(T(n,r,!0,s),D.replaceChild(B,r)),r=B,E={}}return N&&s!=N?N(f,r,o,a):(null==L?r.nodeValue!=P&&(r.nodeValue=P):function(e,t,n,r,o){for(var a in t=t||{})h[a]||a in n||C(e,a,t[a],null,r,o);var u;for(var c in n)h[c]||(C(e,c,t[c],n[c],r,o),u=u||y[c]);return u}(r,m.props,o.props,u,E)||m.props.children==P||function(t,n,r,o,a){for(var u=[],c=j(r,!1,u),i=c.length,s=n.childNodes,f={},l=s.length,p=u.withKeyes,v=p?0:l>i?i:l;v<l;v++){var d=s[v],h=v;p&&u.indexOf(h=d.dataset.key)>-1?f[h]=d:(T(t,d),v--,l--,n.removeChild(d))}for(var y=0;y<i;y++){var g=c[y],m=s[y],w=s[y+1],k=p?f[p?g.key:y]:m;p&&k!=m&&n.insertBefore(k,m);var x=e(t,k||\"function\"!=typeof g.type?k:V(null),g,o,a);k||(w?n.insertBefore(x,w):n.appendChild(x))}}(n,O&&r.shadowRoot||r,P,a,u),r[n]={vnode:o,handlers:E},r)}(a,r,n,o)}function P(e){var t=E().next,n=L(function(t,n){switch(n.type){case s:return\"function\"==typeof e?e():e;case 159:var r=n.state;return\"function\"==typeof r?r(t):r}return t}),r=n[1];return[n[0],function(e){r({state:e,type:159}),t()}]}function R(e,t){L(function(n,r){switch(r.type){case s:return{args:t};case f:case d:return n.clear&&(r.type==d||!t||!n.args||!m(t,n.args))&&n.clear.then(function(e){return e&&e()}),w({},n,{args:t});case l:case p:var o=r.type==l||!t||!n.args||!m(t,n.args),a=n.clear;return o&&(a=b(e)),w({},n,{clear:a,args:t})}return n})}function B(e){return L(!1,{})[0]}function D(e,t){return L(function(n,r){switch(r.type){case s:case f:return{args:t,value:r.type==s?e():m(t,n.args)?n.value:e()}}return n})[0].value}function K(e,t){var n=E().next,r=L(function(n,r){switch(r.type){case s:return t;case 158:return e(n,r.use)}return n}),o=r[1];return[r[0],function(e){o({type:158,use:e}),n()}]}var q=0;function H(e){var t=E().context||{};return e in t?t[e]:e.defaultValue}function M(e){var t=a+q++,n={Provider:function(e){var r,o=e.value,a=e.children,u=E();return n[t]!=o&&(u.context=w({},u.context,((r={})[t]=o,r))),a},Consumer:function(e){return(0,e.children)(H(n))},toString:function(){return t},defaultValue:e};return n}var Z=e;export{M as createContext,Z as h,O as render,j as toList,H as useContext,R as useEffect,D as useMemo,K as useReducer,B as useRef,P as useState};\n//# sourceMappingURL=atomico.mjs.map\n","import{render as t,h as e}from\"@atomico/core\";let r=Promise.resolve(),s=0;function i(t){return(e,r,s)=>{if(t.required&&null==e)throw new Error(`the attribute ${s} is required`);if(typeof(e=\"string\"==t.type?e:\"boolean\"==t.type||JSON.parse(e))!=t.type)throw new Error(`the field ${s} must be of the type ${t.type}`);return e}}class o extends HTMLElement{constructor(){super();let i,o=\"@wc.\"+s++,n=this.constructor.attributes,h=this.props={};this.set=((t,e)=>{if(\"object\"==typeof t&&null==e){for(let e in t)this.set(e,t[e]);return}let s=t.replace(/-(\\w)/g,(t,e)=>e.toUpperCase());n[t]&&(e=n[t](e,h[s],t)),h[s]!=e&&(h[t]=e,!i&&this.mounted&&(i=!0,r.then(()=>{i=!1,this.update(h)})))}),this.render=this.render.bind(this),this.update=(r=>{t(r?e(this.render,r):e(\"host\"),this,o)}),this.setup=(()=>{this.mounted=!0;for(let t in n)this.set(t,this.getAttribute(t));this.update(h)})}static get observedAttributes(){return Object.keys(this.attributes||{})}connectedCallback(){this.setup()}disconnectedCallback(){this.update(null)}attributeChangedCallback(t,e,r){this.set(t,r)}render(){return e(\"host\")}}export{i as type,o as Element};\n//# sourceMappingURL=atomico-element.mjs.map\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import { h } from \"@atomico/core\";\r\nimport style from \"./style.css\";\r\n\r\nlet incrementId = 0;\r\n\r\nexport default function Input(props) {\r\n\treturn (\r\n\t\t<div shadowDom>\r\n\t\t\t<style>{style}</style>\r\n\t\t\t<form\r\n\t\t\t\tonSubmit={event => {\r\n\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\tif (props.onChange)\r\n\t\t\t\t\t\tprops.onChange({\r\n\t\t\t\t\t\t\ttext: event.target.input.value,\r\n\t\t\t\t\t\t\tid: incrementId++\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\tevent.target.reset();\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<input name=\"input\" type=\"text\" placeholder={props.placeholder} />\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { h } from \"@atomico/core\";\r\nimport style from \"./style.css\";\r\nexport default function Item(props) {\r\n\treturn (\r\n\t\t<div shadowDom key={props.key}>\r\n\t\t\t<style>{style}</style>\r\n\t\t\t<input\r\n\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\tonChange={props.onToggle}\r\n\t\t\t\tchecked={props.checked}\r\n\t\t\t/>\r\n\t\t\t<div class=\"text\">{props.text}</div>\r\n\t\t\t<button onClick={props.onRemove}>x</button>\r\n\t\t</div>\r\n\t);\r\n}\r\n","import { h, useState } from \"@atomico/core\";\r\nimport { Element } from \"@atomico/element\";\r\nimport Input from \"./components/Input\";\r\nimport Item from \"./components/Item\";\r\nimport style from \"./style.css\";\r\n\r\nexport default class TagTodo extends Element {\r\n\trender() {\r\n\t\tlet [state, setState] = useState(() => [\r\n\t\t\t{ text: \"my initial todo\", checked: false, id: -1 >>> 0 },\r\n\t\t\t{ text: \"Learn about Web Components\", checked: true, id: -2 >>> 0 }\r\n\t\t]);\r\n\t\treturn (\r\n\t\t\t<host shadowDom>\r\n\t\t\t\t<style>{style}</style>\r\n\t\t\t\t<Input\r\n\t\t\t\t\tplaceholder=\"What needs to be done?\"\r\n\t\t\t\t\tonChange={task => {\r\n\t\t\t\t\t\tsetState(state.concat(task));\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t{state.map(({ text, checked, id }, localIndex) => (\r\n\t\t\t\t\t\t<Item\r\n\t\t\t\t\t\t\tkey={id}\r\n\t\t\t\t\t\t\ttext={text}\r\n\t\t\t\t\t\t\tchecked={checked}\r\n\t\t\t\t\t\t\tonRemove={() => {\r\n\t\t\t\t\t\t\t\tsetState(state.filter((data, index) => index !== localIndex));\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tonToggle={() => {\r\n\t\t\t\t\t\t\t\tsetState(\r\n\t\t\t\t\t\t\t\t\tstate.map((data, index) =>\r\n\t\t\t\t\t\t\t\t\t\tindex === localIndex\r\n\t\t\t\t\t\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t...data,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tchecked: !data.checked\r\n\t\t\t\t\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t\t\t\t\t: data\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t</host>\r\n\t\t);\r\n\t}\r\n}\r\n\r\ncustomElements.define(\"atomico-todo\", TagTodo);\r\n"],"names":["createElement","type","props","children","arguments","length","let","i","push","vnode","key","toVnode","value","defer","Promise","resolve","ID","Element","HTMLElement","constructor","prevent","state","attributes","this","set","name","nextValue","alias","replace","all","chart","toUpperCase","mounted","then","update","render","bind","h","setup","getAttribute","Object","keys","connectedCallback","disconnectedCallback","attributeChangedCallback","prevValue","styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","incrementId","Input","shadowDom","onSubmit","event","preventDefault","onChange","text","target","input","id","reset","placeholder","Item","onToggle","checked","class","onClick","onRemove","TagTodo","useState","setState","task","concat","map","localIndex","filter","data","index","customElements","define"],"mappings":"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"}